{{ template "admin/layout.html" . }}

{{ define "embed" }}
<div class="container-fluid">
    <div class="row">
        <div class="col-md-3">
            <!-- Ayarlar Navigasyonu -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">Ayarlar</h5>
                </div>
                <div class="list-group list-group-flush settings-nav">
                    <a href="#genel" class="list-group-item list-group-item-action active" data-bs-toggle="list">
                        <i class="bi bi-gear me-2"></i> Genel Ayarlar
                    </a>
                    <a href="#gorunum" class="list-group-item list-group-item-action" data-bs-toggle="list">
                        <i class="bi bi-palette me-2"></i> Görünüm
                    </a>
                    <a href="#entegrasyon" class="list-group-item list-group-item-action" data-bs-toggle="list">
                        <i class="bi bi-link-45deg me-2"></i> Entegrasyonlar
                    </a>
                    <a href="#eposta" class="list-group-item list-group-item-action" data-bs-toggle="list">
                        <i class="bi bi-envelope me-2"></i> E-posta
                    </a>
                    <a href="#sosyal" class="list-group-item list-group-item-action" data-bs-toggle="list">
                        <i class="bi bi-share me-2"></i> Sosyal Medya
                    </a>
                    <a href="#seo" class="list-group-item list-group-item-action" data-bs-toggle="list">
                        <i class="bi bi-search me-2"></i> SEO
                    </a>
                    <a href="#cache" class="list-group-item list-group-item-action" data-bs-toggle="list">
                        <i class="bi bi-speedometer2 me-2"></i> Önbellek
                    </a>
                    <a href="#yedekleme" class="list-group-item list-group-item-action" data-bs-toggle="list">
                        <i class="bi bi-cloud-arrow-up me-2"></i> Yedekleme
                    </a>
                </div>
            </div>
        </div>
        
        <div class="col-md-9">
            <!-- Ayarlar İçeriği -->
            <div class="tab-content" id="settingsTabContent">
                <!-- Genel Ayarlar -->
                <div class="tab-pane fade show active" id="genel">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Genel Ayarlar</h5>
                            <button type="button" class="btn btn-sm btn-primary" id="saveGeneralSettings">
                                <i class="bi bi-save"></i> Kaydet
                            </button>
                        </div>
                        <div class="card-body">
                            <form id="generalSettingsForm">
                                <div class="mb-3">
                                    <label for="siteName" class="form-label">Site Adı</label>
                                    <input type="text" class="form-control" id="siteName" name="site_name" value="{{ .Settings.SiteName }}">
                                </div>
                                <div class="mb-3">
                                    <label for="siteDescription" class="form-label">Site Açıklaması</label>
                                    <textarea class="form-control" id="siteDescription" name="site_description" rows="2">{{ .Settings.SiteDescription }}</textarea>
                                </div>
                                <div class="mb-3">
                                    <label for="siteUrl" class="form-label">Site URL</label>
                                    <input type="url" class="form-control" id="siteUrl" name="site_url" value="{{ .Settings.SiteURL }}">
                                </div>
                                <div class="mb-3">
                                    <label for="adminEmail" class="form-label">Yönetici E-posta</label>
                                    <input type="email" class="form-control" id="adminEmail" name="admin_email" value="{{ .Settings.AdminEmail }}">
                                </div>
                                <div class="mb-3">
                                    <label for="timezone" class="form-label">Zaman Dilimi</label>
                                    <select class="form-select" id="timezone" name="timezone">
                                        <option value="Europe/Istanbul" {{ if eq .Settings.Timezone "Europe/Istanbul" }}selected{{ end }}>İstanbul (UTC+3)</option>
                                        <option value="Europe/London" {{ if eq .Settings.Timezone "Europe/London" }}selected{{ end }}>Londra (UTC+0/+1)</option>
                                        <option value="America/New_York" {{ if eq .Settings.Timezone "America/New_York" }}selected{{ end }}>New York (UTC-5/-4)</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="dateFormat" class="form-label">Tarih Formatı</label>
                                    <select class="form-select" id="dateFormat" name="date_format">
                                        <option value="DD.MM.YYYY" {{ if eq .Settings.DateFormat "DD.MM.YYYY" }}selected{{ end }}>31.12.2023</option>
                                        <option value="MM/DD/YYYY" {{ if eq .Settings.DateFormat "MM/DD/YYYY" }}selected{{ end }}>12/31/2023</option>
                                        <option value="YYYY-MM-DD" {{ if eq .Settings.DateFormat "YYYY-MM-DD" }}selected{{ end }}>2023-12-31</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="enableComments" name="enable_comments" {{ if .Settings.EnableComments }}checked{{ end }}>
                                        <label class="form-check-label" for="enableComments">Yorumları Etkinleştir</label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="autoApproveComments" name="auto_approve_comments" {{ if .Settings.AutoApproveComments }}checked{{ end }}>
                                        <label class="form-check-label" for="autoApproveComments">Yorumları Otomatik Onayla</label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="defaultLanguage" class="form-label">Varsayılan Dil</label>
                                    <select class="form-select" id="defaultLanguage" name="default_language">
                                        <option value="tr" {{ if eq .Settings.DefaultLanguage "tr" }}selected{{ end }}>Türkçe</option>
                                        <option value="en" {{ if eq .Settings.DefaultLanguage "en" }}selected{{ end }}>English</option>
                                    </select>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Görünüm Ayarları -->
                <div class="tab-pane fade" id="gorunum">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Görünüm Ayarları</h5>
                            <button type="button" class="btn btn-sm btn-primary" id="saveAppearanceSettings">
                                <i class="bi bi-save"></i> Kaydet
                            </button>
                        </div>
                        <div class="card-body">
                            <form id="appearanceSettingsForm">
                                <div class="mb-3">
                                    <label for="theme" class="form-label">Tema</label>
                                    <select class="form-select" id="theme" name="theme">
                                        <option value="default" {{ if eq .Settings.Theme "default" }}selected{{ end }}>Varsayılan</option>
                                        <option value="dark" {{ if eq .Settings.Theme "dark" }}selected{{ end }}>Karanlık</option>
                                        <option value="light" {{ if eq .Settings.Theme "light" }}selected{{ end }}>Aydınlık</option>
                                    </select>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="primaryColor" class="form-label">Ana Renk</label>
                                        <div class="input-group">
                                            <input type="color" class="form-control form-control-color" id="primaryColor" name="primary_color" value="{{ .Settings.PrimaryColor }}">
                                            <input type="text" class="form-control" value="{{ .Settings.PrimaryColor }}">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="secondaryColor" class="form-label">İkincil Renk</label>
                                        <div class="input-group">
                                            <input type="color" class="form-control form-control-color" id="secondaryColor" name="secondary_color" value="{{ .Settings.SecondaryColor }}">
                                            <input type="text" class="form-control" value="{{ .Settings.SecondaryColor }}">
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="logo" class="form-label">Logo</label>
                                    <div class="input-group">
                                        <input type="file" class="form-control" id="logo" name="logo">
                                        <button class="btn btn-outline-secondary" type="button" id="selectLogoFromMedia">
                                            <i class="bi bi-images"></i> Medya
                                        </button>
                                    </div>
                                    <div class="mt-2">
                                        {{ if .Settings.Logo }}
                                        <img src="{{ .Settings.Logo }}" alt="Logo" height="50" class="border p-1">
                                        {{ else }}
                                        <div class="text-muted">Logo yüklenmemiş</div>
                                        {{ end }}
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="favicon" class="form-label">Favicon</label>
                                    <div class="input-group">
                                        <input type="file" class="form-control" id="favicon" name="favicon">
                                        <button class="btn btn-outline-secondary" type="button" id="selectFaviconFromMedia">
                                            <i class="bi bi-images"></i> Medya
                                        </button>
                                    </div>
                                    <div class="mt-2">
                                        {{ if .Settings.Favicon }}
                                        <img src="{{ .Settings.Favicon }}" alt="Favicon" height="32" class="border p-1">
                                        {{ else }}
                                        <div class="text-muted">Favicon yüklenmemiş</div>
                                        {{ end }}
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="homepageLayout" class="form-label">Ana Sayfa Düzeni</label>
                                    <select class="form-select" id="homepageLayout" name="homepage_layout">
                                        <option value="default" {{ if eq .Settings.HomepageLayout "default" }}selected{{ end }}>Varsayılan</option>
                                        <option value="magazine" {{ if eq .Settings.HomepageLayout "magazine" }}selected{{ end }}>Dergi</option>
                                        <option value="blog" {{ if eq .Settings.HomepageLayout "blog" }}selected{{ end }}>Blog</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="customCss" class="form-label">Özel CSS</label>
                                    <textarea class="form-control" id="customCss" name="custom_css" rows="4">{{ .Settings.CustomCSS }}</textarea>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Entegrasyon Ayarları -->
                <div class="tab-pane fade" id="entegrasyon">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Entegrasyon Ayarları</h5>
                            <button type="button" class="btn btn-sm btn-primary" id="saveIntegrationSettings">
                                <i class="bi bi-save"></i> Kaydet
                            </button>
                        </div>
                        <div class="card-body">
                            <form id="integrationSettingsForm">
                                <div class="mb-4">
                                    <h6>Google Analytics</h6>
                                    <div class="mb-3">
                                        <label for="googleAnalyticsId" class="form-label">Ölçüm Kimliği</label>
                                        <input type="text" class="form-control" id="googleAnalyticsId" name="google_analytics_id" value="{{ .Settings.GoogleAnalyticsID }}" placeholder="G-XXXXXXXXXX">
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <h6>Google Tag Manager</h6>
                                    <div class="mb-3">
                                        <label for="googleTagManagerId" class="form-label">Konteyner Kimliği</label>
                                        <input type="text" class="form-control" id="googleTagManagerId" name="google_tag_manager_id" value="{{ .Settings.GoogleTagManagerID }}" placeholder="GTM-XXXXXXX">
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <h6>Google reCAPTCHA</h6>
                                    <div class="mb-3">
                                        <label for="recaptchaSiteKey" class="form-label">Site Anahtarı</label>
                                        <input type="text" class="form-control" id="recaptchaSiteKey" name="recaptcha_site_key" value="{{ .Settings.RecaptchaSiteKey }}">
                                    </div>
                                    <div class="mb-3">
                                        <label for="recaptchaSecretKey" class="form-label">Gizli Anahtar</label>
                                        <input type="text" class="form-control" id="recaptchaSecretKey" name="recaptcha_secret_key" value="{{ .Settings.RecaptchaSecretKey }}">
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <h6>Facebook Pixel</h6>
                                    <div class="mb-3">
                                        <label for="facebookPixelId" class="form-label">Pixel ID</label>
                                        <input type="text" class="form-control" id="facebookPixelId" name="facebook_pixel_id" value="{{ .Settings.FacebookPixelID }}">
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <h6>Disqus</h6>
                                    <div class="mb-3">
                                        <label for="disqusShortname" class="form-label">Kısa Ad (Shortname)</label>
                                        <input type="text" class="form-control" id="disqusShortname" name="disqus_shortname" value="{{ .Settings.DisqusShortname }}">
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="customHeader" class="form-label">Özel Header Script</label>
                                    <textarea class="form-control" id="customHeader" name="custom_header" rows="3">{{ .Settings.CustomHeader }}</textarea>
                                    <small class="text-muted">Bu alan, header bölümüne eklenecek özel script kodları içindir.</small>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="customFooter" class="form-label">Özel Footer Script</label>
                                    <textarea class="form-control" id="customFooter" name="custom_footer" rows="3">{{ .Settings.CustomFooter }}</textarea>
                                    <small class="text-muted">Bu alan, footer bölümüne eklenecek özel script kodları içindir.</small>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Diğer sekmeler benzer şekilde oluşturulabilir... -->
                
                <!-- Örnek: E-posta Ayarları -->
                <div class="tab-pane fade" id="eposta">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">E-posta Ayarları</h5>
                            <div>
                                <button type="button" class="btn btn-sm btn-outline-info me-2" id="testEmailSettings">
                                    <i class="bi bi-envelope-check"></i> Test E-postası Gönder
                                </button>
                                <button type="button" class="btn btn-sm btn-primary" id="saveEmailSettings">
                                    <i class="bi bi-save"></i> Kaydet
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <form id="emailSettingsForm">
                                <div class="mb-3">
                                    <label for="emailProvider" class="form-label">E-posta Sağlayıcısı</label>
                                    <select class="form-select" id="emailProvider" name="email_provider">
                                        <option value="smtp" {{ if eq .Settings.EmailProvider "smtp" }}selected{{ end }}>SMTP</option>
                                        <option value="sendgrid" {{ if eq .Settings.EmailProvider "sendgrid" }}selected{{ end }}>SendGrid</option>
                                        <option value="mailchimp" {{ if eq .Settings.EmailProvider "mailchimp" }}selected{{ end }}>Mailchimp</option>
                                    </select>
                                </div>
                                
                                <div id="smtpSettings" class="{{ if ne .Settings.EmailProvider "smtp" }}d-none{{ end }}">
                                    <div class="mb-3">
                                        <label for="smtpHost" class="form-label">SMTP Host</label>
                                        <input type="text" class="form-control" id="smtpHost" name="smtp_host" value="{{ .Settings.SMTPHost }}">
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="smtpPort" class="form-label">SMTP Port</label>
                                            <input type="number" class="form-control" id="smtpPort" name="smtp_port" value="{{ .Settings.SMTPPort }}">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="smtpSecurity" class="form-label">Güvenlik</label>
                                            <select class="form-select" id="smtpSecurity" name="smtp_security">
                                                <option value="none" {{ if eq .Settings.SMTPSecurity "none" }}selected{{ end }}>Yok</option>
                                                <option value="ssl" {{ if eq .Settings.SMTPSecurity "ssl" }}selected{{ end }}>SSL</option>
                                                <option value="tls" {{ if eq .Settings.SMTPSecurity "tls" }}selected{{ end }}>TLS</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="smtpUsername" class="form-label">SMTP Kullanıcı Adı</label>
                                        <input type="text" class="form-control" id="smtpUsername" name="smtp_username" value="{{ .Settings.SMTPUsername }}">
                                    </div>
                                    <div class="mb-3">
                                        <label for="smtpPassword" class="form-label">SMTP Parola</label>
                                        <input type="password" class="form-control" id="smtpPassword" name="smtp_password" value="{{ .Settings.SMTPPassword }}">
                                    </div>
                                </div>
                                
                                <div id="apiSettings" class="{{ if eq .Settings.EmailProvider "smtp" }}d-none{{ end }}">
                                    <div class="mb-3">
                                        <label for="apiKey" class="form-label">API Anahtarı</label>
                                        <input type="text" class="form-control" id="apiKey" name="email_api_key" value="{{ .Settings.EmailAPIKey }}">
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="fromEmail" class="form-label">Gönderen E-posta</label>
                                    <input type="email" class="form-control" id="fromEmail" name="from_email" value="{{ .Settings.FromEmail }}">
                                </div>
                                <div class="mb-3">
                                    <label for="fromName" class="form-label">Gönderen Adı</label>
                                    <input type="text" class="form-control" id="fromName" name="from_name" value="{{ .Settings.FromName }}">
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Sosyal Medya Ayarları -->
                <div class="tab-pane fade" id="sosyal">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Sosyal Medya Ayarları</h5>
                            <button type="button" class="btn btn-sm btn-primary" id="saveSocialSettings">
                                <i class="bi bi-save"></i> Kaydet
                            </button>
                        </div>
                        <div class="card-body">
                            <form id="socialSettingsForm">
                                <div class="mb-4">
                                    <h6>Sosyal Medya Profilleri</h6>
                                    <p class="text-muted small">Sosyal medya hesaplarınızın bağlantılarını ekleyin. Boş bırakılan alanlar site üzerinde gösterilmeyecektir.</p>
                                    
                                    <div class="mb-3">
                                        <label for="facebookUrl" class="form-label">
                                            <i class="bi bi-facebook me-1"></i> Facebook
                                        </label>
                                        <input type="url" class="form-control" id="facebookUrl" name="facebook_url" value="{{ .Settings.FacebookURL }}" placeholder="https://facebook.com/sayfaniz">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="twitterUrl" class="form-label">
                                            <i class="bi bi-twitter me-1"></i> Twitter
                                        </label>
                                        <input type="url" class="form-control" id="twitterUrl" name="twitter_url" value="{{ .Settings.TwitterURL }}" placeholder="https://twitter.com/kullaniciadiniz">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="instagramUrl" class="form-label">
                                            <i class="bi bi-instagram me-1"></i> Instagram
                                        </label>
                                        <input type="url" class="form-control" id="instagramUrl" name="instagram_url" value="{{ .Settings.InstagramURL }}" placeholder="https://instagram.com/kullaniciadiniz">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="youtubeUrl" class="form-label">
                                            <i class="bi bi-youtube me-1"></i> YouTube
                                        </label>
                                        <input type="url" class="form-control" id="youtubeUrl" name="youtube_url" value="{{ .Settings.YouTubeURL }}" placeholder="https://youtube.com/channel/kanaliniz">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="linkedinUrl" class="form-label">
                                            <i class="bi bi-linkedin me-1"></i> LinkedIn
                                        </label>
                                        <input type="url" class="form-control" id="linkedinUrl" name="linkedin_url" value="{{ .Settings.LinkedInURL }}" placeholder="https://linkedin.com/company/sirketiniz">
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <h6>Sosyal Paylaşım Ayarları</h6>
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="enableSocialSharing" name="enable_social_sharing" {{ if .Settings.EnableSocialSharing }}checked{{ end }}>
                                            <label class="form-check-label" for="enableSocialSharing">Sosyal Paylaşım Butonlarını Göster</label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label class="form-label">Paylaşım Butonlarını Seçin</label>
                                        <div class="d-flex flex-wrap gap-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="shareFacebook" name="share_facebook" {{ if .Settings.ShareFacebook }}checked{{ end }}>
                                                <label class="form-check-label" for="shareFacebook">
                                                    <i class="bi bi-facebook me-1"></i> Facebook
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="shareTwitter" name="share_twitter" {{ if .Settings.ShareTwitter }}checked{{ end }}>
                                                <label class="form-check-label" for="shareTwitter">
                                                    <i class="bi bi-twitter me-1"></i> Twitter
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="shareWhatsapp" name="share_whatsapp" {{ if .Settings.ShareWhatsapp }}checked{{ end }}>
                                                <label class="form-check-label" for="shareWhatsapp">
                                                    <i class="bi bi-whatsapp me-1"></i> WhatsApp
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="shareLinkedin" name="share_linkedin" {{ if .Settings.ShareLinkedin }}checked{{ end }}>
                                                <label class="form-check-label" for="shareLinkedin">
                                                    <i class="bi bi-linkedin me-1"></i> LinkedIn
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="shareTelegram" name="share_telegram" {{ if .Settings.ShareTelegram }}checked{{ end }}>
                                                <label class="form-check-label" for="shareTelegram">
                                                    <i class="bi bi-telegram me-1"></i> Telegram
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="shareEmail" name="share_email" {{ if .Settings.ShareEmail }}checked{{ end }}>
                                                <label class="form-check-label" for="shareEmail">
                                                    <i class="bi bi-envelope me-1"></i> E-posta
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <h6>Sosyal Hesap Giriş Ayarları</h6>
                                    <div class="form-check form-switch mb-3">
                                        <input class="form-check-input" type="checkbox" id="enableSocialLogin" name="enable_social_login" {{ if .Settings.EnableSocialLogin }}checked{{ end }}>
                                        <label class="form-check-label" for="enableSocialLogin">Sosyal Hesapla Giriş Etkinleştir</label>
                                    </div>
                                    
                                    <div class="card mb-3">
                                        <div class="card-header">
                                            <i class="bi bi-facebook me-1"></i> Facebook ile Giriş
                                        </div>
                                        <div class="card-body">
                                            <div class="form-check form-switch mb-3">
                                                <input class="form-check-input" type="checkbox" id="enableFacebookLogin" name="enable_facebook_login" {{ if .Settings.EnableFacebookLogin }}checked{{ end }}>
                                                <label class="form-check-label" for="enableFacebookLogin">Facebook ile Giriş Etkinleştir</label>
                                            </div>
                                            <div class="mb-3">
                                                <label for="facebookAppId" class="form-label">App ID</label>
                                                <input type="text" class="form-control" id="facebookAppId" name="facebook_app_id" value="{{ .Settings.FacebookAppID }}">
                                            </div>
                                            <div class="mb-3">
                                                <label for="facebookAppSecret" class="form-label">App Secret</label>
                                                <input type="password" class="form-control" id="facebookAppSecret" name="facebook_app_secret" value="{{ .Settings.FacebookAppSecret }}">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="card mb-3">
                                        <div class="card-header">
                                            <i class="bi bi-google me-1"></i> Google ile Giriş
                                        </div>
                                        <div class="card-body">
                                            <div class="form-check form-switch mb-3">
                                                <input class="form-check-input" type="checkbox" id="enableGoogleLogin" name="enable_google_login" {{ if .Settings.EnableGoogleLogin }}checked{{ end }}>
                                                <label class="form-check-label" for="enableGoogleLogin">Google ile Giriş Etkinleştir</label>
                                            </div>
                                            <div class="mb-3">
                                                <label for="googleClientId" class="form-label">Client ID</label>
                                                <input type="text" class="form-control" id="googleClientId" name="google_client_id" value="{{ .Settings.GoogleClientID }}">
                                            </div>
                                            <div class="mb-3">
                                                <label for="googleClientSecret" class="form-label">Client Secret</label>
                                                <input type="password" class="form-control" id="googleClientSecret" name="google_client_secret" value="{{ .Settings.GoogleClientSecret }}">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- SEO Ayarları -->
                <div class="tab-pane fade" id="seo">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">SEO Ayarları</h5>
                            <button type="button" class="btn btn-sm btn-primary" id="saveSeoSettings">
                                <i class="bi bi-save"></i> Kaydet
                            </button>
                        </div>
                        <div class="card-body">
                            <form id="seoSettingsForm">
                                <div class="mb-4">
                                    <h6>Meta Başlık ve Açıklama Formatları</h6>
                                    <p class="text-muted small">Aşağıdaki değişkenleri kullanabilirsiniz: {site_name}, {page_title}, {category}, {tag}, {author}, {excerpt}</p>
                                    
                                    <div class="mb-3">
                                        <label for="homePageTitle" class="form-label">Ana Sayfa Başlık Formatı</label>
                                        <input type="text" class="form-control" id="homePageTitle" name="home_page_title" value="{{ .Settings.HomePageTitle }}" placeholder="{site_name} - {site_description}">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="articleTitle" class="form-label">Haber Başlık Formatı</label>
                                        <input type="text" class="form-control" id="articleTitle" name="article_title" value="{{ .Settings.ArticleTitle }}" placeholder="{page_title} - {site_name}">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="categoryTitle" class="form-label">Kategori Başlık Formatı</label>
                                        <input type="text" class="form-control" id="categoryTitle" name="category_title" value="{{ .Settings.CategoryTitle }}" placeholder="{category} - {site_name}">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="tagTitle" class="form-label">Etiket Başlık Formatı</label>
                                        <input type="text" class="form-control" id="tagTitle" name="tag_title" value="{{ .Settings.TagTitle }}" placeholder="{tag} - {site_name}">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="authorTitle" class="form-label">Yazar Başlık Formatı</label>
                                        <input type="text" class="form-control" id="authorTitle" name="author_title" value="{{ .Settings.AuthorTitle }}" placeholder="{author} - {site_name}">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="metaDescription" class="form-label">Meta Açıklama Formatı</label>
                                        <textarea class="form-control" id="metaDescription" name="meta_description" rows="2">{{ .Settings.MetaDescription }}</textarea>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="articleMetaDescription" class="form-label">Haber Meta Açıklama Formatı</label>
                                        <textarea class="form-control" id="articleMetaDescription" name="article_meta_description" rows="2">{{ .Settings.ArticleMetaDescription }}</textarea>
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <h6>Site Haritası ve Robots.txt</h6>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="enableSitemap" name="enable_sitemap" {{ if .Settings.EnableSitemap }}checked{{ end }}>
                                            <label class="form-check-label" for="enableSitemap">Otomatik Sitemap Oluştur</label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="sitemapChangeFreq" class="form-label">Değişiklik Sıklığı</label>
                                        <select class="form-select" id="sitemapChangeFreq" name="sitemap_change_freq">
                                            <option value="always" {{ if eq .Settings.SitemapChangeFreq "always" }}selected{{ end }}>Her zaman</option>
                                            <option value="hourly" {{ if eq .Settings.SitemapChangeFreq "hourly" }}selected{{ end }}>Saatlik</option>
                                            <option value="daily" {{ if eq .Settings.SitemapChangeFreq "daily" }}selected{{ end }}>Günlük</option>
                                            <option value="weekly" {{ if eq .Settings.SitemapChangeFreq "weekly" }}selected{{ end }}>Haftalık</option>
                                            <option value="monthly" {{ if eq .Settings.SitemapChangeFreq "monthly" }}selected{{ end }}>Aylık</option>
                                            <option value="yearly" {{ if eq .Settings.SitemapChangeFreq "yearly" }}selected{{ end }}>Yıllık</option>
                                            <option value="never" {{ if eq .Settings.SitemapChangeFreq "never" }}selected{{ end }}>Asla</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="sitemapPriority" class="form-label">Öncelik</label>
                                        <select class="form-select" id="sitemapPriority" name="sitemap_priority">
                                            <option value="0.1" {{ if eq .Settings.SitemapPriority "0.1" }}selected{{ end }}>0.1</option>
                                            <option value="0.2" {{ if eq .Settings.SitemapPriority "0.2" }}selected{{ end }}>0.2</option>
                                            <option value="0.3" {{ if eq .Settings.SitemapPriority "0.3" }}selected{{ end }}>0.3</option>
                                            <option value="0.4" {{ if eq .Settings.SitemapPriority "0.4" }}selected{{ end }}>0.4</option>
                                            <option value="0.5" {{ if eq .Settings.SitemapPriority "0.5" }}selected{{ end }}>0.5</option>
                                            <option value="0.6" {{ if eq .Settings.SitemapPriority "0.6" }}selected{{ end }}>0.6</option>
                                            <option value="0.7" {{ if eq .Settings.SitemapPriority "0.7" }}selected{{ end }}>0.7</option>
                                            <option value="0.8" {{ if eq .Settings.SitemapPriority "0.8" }}selected{{ end }}>0.8</option>
                                            <option value="0.9" {{ if eq .Settings.SitemapPriority "0.9" }}selected{{ end }}>0.9</option>
                                            <option value="1.0" {{ if eq .Settings.SitemapPriority "1.0" }}selected{{ end }}>1.0</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="robotsTxt" class="form-label">Robots.txt İçeriği</label>
                                        <textarea class="form-control" id="robotsTxt" name="robots_txt" rows="6">{{ .Settings.RobotsTxt }}</textarea>
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <h6>Sosyal Medya Meta Etiketleri</h6>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="enableOpenGraph" name="enable_open_graph" {{ if .Settings.EnableOpenGraph }}checked{{ end }}>
                                            <label class="form-check-label" for="enableOpenGraph">Open Graph Etiketlerini Etkinleştir</label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="enableTwitterCards" name="enable_twitter_cards" {{ if .Settings.EnableTwitterCards }}checked{{ end }}>
                                            <label class="form-check-label" for="enableTwitterCards">Twitter Cards Etiketlerini Etkinleştir</label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="twitterUsername" class="form-label">Twitter Kullanıcı Adı</label>
                                        <div class="input-group">
                                            <span class="input-group-text">@</span>
                                            <input type="text" class="form-control" id="twitterUsername" name="twitter_username" value="{{ .Settings.TwitterUsername }}">
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="defaultSocialImage" class="form-label">Varsayılan Sosyal Medya Görseli</label>
                                        <div class="input-group">
                                            <input type="file" class="form-control" id="defaultSocialImage" name="default_social_image">
                                            <button class="btn btn-outline-secondary" type="button" id="selectSocialImageFromMedia">
                                                <i class="bi bi-images"></i> Medya
                                            </button>
                                        </div>
                                        <div class="mt-2">
                                            {{ if .Settings.DefaultSocialImage }}
                                            <img src="{{ .Settings.DefaultSocialImage }}" alt="Sosyal Medya Görseli" height="80" class="border p-1">
                                            {{ else }}
                                            <div class="text-muted">Görsel seçilmemiş</div>
                                            {{ end }}
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <h6>Yapılandırılmış Veri (Schema.org)</h6>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="enableStructuredData" name="enable_structured_data" {{ if .Settings.EnableStructuredData }}checked{{ end }}>
                                            <label class="form-check-label" for="enableStructuredData">Yapılandırılmış Veri Etiketlerini Etkinleştir</label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="organizationType" class="form-label">Organizasyon Türü</label>
                                        <select class="form-select" id="organizationType" name="organization_type">
                                            <option value="Organization" {{ if eq .Settings.OrganizationType "Organization" }}selected{{ end }}>Organizasyon</option>
                                            <option value="NewsMediaOrganization" {{ if eq .Settings.OrganizationType "NewsMediaOrganization" }}selected{{ end }}>Haber Medya Kuruluşu</option>
                                            <option value="Corporation" {{ if eq .Settings.OrganizationType "Corporation" }}selected{{ end }}>Şirket</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="organizationLogo" class="form-label">Organizasyon Logosu</label>
                                        <div class="input-group">
                                            <input type="file" class="form-control" id="organizationLogo" name="organization_logo">
                                            <button class="btn btn-outline-secondary" type="button" id="selectOrganizationLogoFromMedia">
                                                <i class="bi bi-images"></i> Medya
                                            </button>
                                        </div>
                                        <div class="mt-2">
                                            {{ if .Settings.OrganizationLogo }}
                                            <img src="{{ .Settings.OrganizationLogo }}" alt="Organizasyon Logosu" height="50" class="border p-1">
                                            {{ else }}
                                            <div class="text-muted">Logo seçilmemiş</div>
                                            {{ end }}
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="articleType" class="form-label">Haber Türü</label>
                                        <select class="form-select" id="articleType" name="article_type">
                                            <option value="Article" {{ if eq .Settings.ArticleType "Article" }}selected{{ end }}>Makale</option>
                                            <option value="NewsArticle" {{ if eq .Settings.ArticleType "NewsArticle" }}selected{{ end }}>Haber Makalesi</option>
                                            <option value="BlogPosting" {{ if eq .Settings.ArticleType "BlogPosting" }}selected{{ end }}>Blog Yazısı</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <h6>Diğer SEO Ayarları</h6>
                                    
                                    <div class="form-check form-switch mb-3">
                                        <input class="form-check-input" type="checkbox" id="enableCanonicalUrls" name="enable_canonical_urls" {{ if .Settings.EnableCanonicalUrls }}checked{{ end }}>
                                        <label class="form-check-label" for="enableCanonicalUrls">Canonical URL'leri Etkinleştir</label>
                                    </div>
                                    
                                    <div class="form-check form-switch mb-3">
                                        <input class="form-check-input" type="checkbox" id="noindexCategories" name="noindex_categories" {{ if .Settings.NoindexCategories }}checked{{ end }}>
                                        <label class="form-check-label" for="noindexCategories">Kategori Sayfalarını İndexleme (noindex)</label>
                                    </div>
                                    
                                    <div class="form-check form-switch mb-3">
                                        <input class="form-check-input" type="checkbox" id="noindexTags" name="noindex_tags" {{ if .Settings.NoindexTags }}checked{{ end }}>
                                        <label class="form-check-label" for="noindexTags">Etiket Sayfalarını İndexleme (noindex)</label>
                                    </div>
                                    
                                    <div class="form-check form-switch mb-3">
                                        <input class="form-check-input" type="checkbox" id="noindexAuthors" name="noindex_authors" {{ if .Settings.NoindexAuthors }}checked{{ end }}>
                                        <label class="form-check-label" for="noindexAuthors">Yazar Sayfalarını İndexleme (noindex)</label>
                                    </div>
                                    
                                    <div class="form-check form-switch mb-3">
                                        <input class="form-check-input" type="checkbox" id="noindexArchives" name="noindex_archives" {{ if .Settings.NoindexArchives }}checked{{ end }}>
                                        <label class="form-check-label" for="noindexArchives">Arşiv Sayfalarını İndexleme (noindex)</label>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Önbellek Ayarları -->
                <div class="tab-pane fade" id="cache">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Önbellek Ayarları</h5>
                            <div>
                                <button type="button" class="btn btn-sm btn-danger me-2" id="clearAllCache">
                                    <i class="bi bi-trash"></i> Tüm Önbelleği Temizle
                                </button>
                                <button type="button" class="btn btn-sm btn-primary" id="saveCacheSettings">
                                    <i class="bi bi-save"></i> Kaydet
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <form id="cacheSettingsForm">
                                <div class="mb-4">
                                    <h6>Sayfa Önbelleği</h6>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="enablePageCache" name="enable_page_cache" {{ if .Settings.EnablePageCache }}checked{{ end }}>
                                            <label class="form-check-label" for="enablePageCache">Sayfa Önbelleğini Etkinleştir</label>
                                        </div>
                                        <small class="text-muted">Sayfaların önbelleğe alınması, sunucu yükünü azaltır ve sayfa yükleme hızını artırır.</small>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="pageCacheDuration" class="form-label">Sayfa Önbellek Süresi (dakika)</label>
                                        <input type="number" class="form-control" id="pageCacheDuration" name="page_cache_duration" value="{{ .Settings.PageCacheDuration }}" min="1">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="excludedPaths" class="form-label">Önbellekten Hariç Tutulacak Sayfalar</label>
                                        <textarea class="form-control" id="excludedPaths" name="excluded_cache_paths" rows="3" placeholder="Her satıra bir URL deseni yazın">{{ .Settings.ExcludedCachePaths }}</textarea>
                                        <small class="text-muted">Dinamik içerik içeren sayfaları buraya ekleyin (örn: /admin/*, /profil/*, vb.)</small>
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <h6>Veritabanı Sorgu Önbelleği</h6>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="enableQueryCache" name="enable_query_cache" {{ if .Settings.EnableQueryCache }}checked{{ end }}>
                                            <label class="form-check-label" for="enableQueryCache">Sorgu Önbelleğini Etkinleştir</label>
                                        </div>
                                        <small class="text-muted">Veritabanı sorgularının önbelleklenmesi, veritabanı yükünü azaltır.</small>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="queryCacheDuration" class="form-label">Sorgu Önbellek Süresi (dakika)</label>
                                        <input type="number" class="form-control" id="queryCacheDuration" name="query_cache_duration" value="{{ .Settings.QueryCacheDuration }}" min="1">
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <h6>Tarayıcı Önbelleği</h6>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="enableBrowserCache" name="enable_browser_cache" {{ if .Settings.EnableBrowserCache }}checked{{ end }}>
                                            <label class="form-check-label" for="enableBrowserCache">Tarayıcı Önbelleğini Etkinleştir</label>
                                        </div>
                                        <small class="text-muted">Tarayıcı önbelleği, statik dosyaların kullanıcı tarayıcısında saklanmasını sağlar.</small>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="browserCacheDuration" class="form-label">Tarayıcı Önbellek Süresi (gün)</label>
                                        <input type="number" class="form-control" id="browserCacheDuration" name="browser_cache_duration" value="{{ .Settings.BrowserCacheDuration }}" min="1">
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <h6>İçerik Dağıtım Ağı (CDN)</h6>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="enableCdn" name="enable_cdn" {{ if .Settings.EnableCDN }}checked{{ end }}>
                                            <label class="form-check-label" for="enableCdn">CDN Kullanımını Etkinleştir</label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="cdnUrl" class="form-label">CDN URL</label>
                                        <input type="url" class="form-control" id="cdnUrl" name="cdn_url" value="{{ .Settings.CDNURL }}" placeholder="https://cdn.example.com">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label class="form-label">CDN için Dosya Türleri</label>
                                        <div class="d-flex flex-wrap gap-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="cdnImages" name="cdn_images" {{ if .Settings.CDNImages }}checked{{ end }}>
                                                <label class="form-check-label" for="cdnImages">Resimler</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="cdnCss" name="cdn_css" {{ if .Settings.CDNCSS }}checked{{ end }}>
                                                <label class="form-check-label" for="cdnCss">CSS</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="cdnJs" name="cdn_js" {{ if .Settings.CDNJS }}checked{{ end }}>
                                                <label class="form-check-label" for="cdnJs">JavaScript</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="cdnFonts" name="cdn_fonts" {{ if .Settings.CDNFonts }}checked{{ end }}>
                                                <label class="form-check-label" for="cdnFonts">Fontlar</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <h6>Medya Optimizasyonu</h6>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="enableImageOptimization" name="enable_image_optimization" {{ if .Settings.EnableImageOptimization }}checked{{ end }}>
                                            <label class="form-check-label" for="enableImageOptimization">Resim Optimizasyonunu Etkinleştir</label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="imageQuality" class="form-label">Resim Kalitesi (%)</label>
                                        <input type="range" class="form-range" id="imageQuality" name="image_quality" min="60" max="100" value="{{ .Settings.ImageQuality }}">
                                        <div class="d-flex justify-content-between">
                                            <small>Düşük (60%)</small>
                                            <small id="imageQualityValue">{{ .Settings.ImageQuality }}%</small>
                                            <small>Yüksek (100%)</small>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="enableWebp" name="enable_webp" {{ if .Settings.EnableWebP }}checked{{ end }}>
                                            <label class="form-check-label" for="enableWebp">WebP Format Desteğini Etkinleştir</label>
                                        </div>
                                        <small class="text-muted">Destekleyen tarayıcılarda resimler WebP formatında sunulacaktır.</small>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="enableLazyLoading" name="enable_lazy_loading" {{ if .Settings.EnableLazyLoading }}checked{{ end }}>
                                            <label class="form-check-label" for="enableLazyLoading">Gecikmeli Yüklemeyi Etkinleştir</label>
                                        </div>
                                        <small class="text-muted">Sayfadaki görseller, görünür hale geldikçe yüklenecektir.</small>
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <h6>Kod Optimizasyonu</h6>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="enableJsMinify" name="enable_js_minify" {{ if .Settings.EnableJSMinify }}checked{{ end }}>
                                            <label class="form-check-label" for="enableJsMinify">JavaScript Dosyalarını Sıkıştır</label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="enableCssMinify" name="enable_css_minify" {{ if .Settings.EnableCSSMinify }}checked{{ end }}>
                                            <label class="form-check-label" for="enableCssMinify">CSS Dosyalarını Sıkıştır</label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="enableHtmlMinify" name="enable_html_minify" {{ if .Settings.EnableHTMLMinify }}checked{{ end }}>
                                            <label class="form-check-label" for="enableHtmlMinify">HTML Çıktısını Sıkıştır</label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="combineJsFiles" name="combine_js_files" {{ if .Settings.CombineJSFiles }}checked{{ end }}>
                                            <label class="form-check-label" for="combineJsFiles">JavaScript Dosyalarını Birleştir</label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="combineCssFiles" name="combine_css_files" {{ if .Settings.CombineCSSFiles }}checked{{ end }}>
                                            <label class="form-check-label" for="combineCssFiles">CSS Dosyalarını Birleştir</label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <h6>Önbellek Temizleme</h6>
                                    <div class="row">
                                        <div class="col-md-6 mb-2">
                                            <button type="button" class="btn btn-outline-secondary w-100" id="clearPageCache">
                                                <i class="bi bi-trash"></i> Sayfa Önbelleğini Temizle
                                            </button>
                                        </div>
                                        <div class="col-md-6 mb-2">
                                            <button type="button" class="btn btn-outline-secondary w-100" id="clearQueryCache">
                                                <i class="bi bi-trash"></i> Sorgu Önbelleğini Temizle
                                            </button>
                                        </div>
                                        <div class="col-md-6 mb-2">
                                            <button type="button" class="btn btn-outline-secondary w-100" id="clearImageCache">
                                                <i class="bi bi-trash"></i> Resim Önbelleğini Temizle
                                            </button>
                                        </div>
                                        <div class="col-md-6 mb-2">
                                            <button type="button" class="btn btn-outline-secondary w-100" id="clearMinifiedCache">
                                                <i class="bi bi-trash"></i> Sıkıştırılmış Dosya Önbelleğini Temizle
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Yedekleme Ayarları -->
                <div class="tab-pane fade" id="yedekleme">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Yedekleme Ayarları</h5>
                            <div>
                                <button type="button" class="btn btn-sm btn-success me-2" id="createBackupNow">
                                    <i class="bi bi-download"></i> Şimdi Yedekle
                                </button>
                                <button type="button" class="btn btn-sm btn-primary" id="saveBackupSettings">
                                    <i class="bi bi-save"></i> Kaydet
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <form id="backupSettingsForm">
                                <div class="mb-4">
                                    <h6>Otomatik Yedekleme</h6>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="enableAutoBackup" name="enable_auto_backup" {{ if .Settings.EnableAutoBackup }}checked{{ end }}>
                                            <label class="form-check-label" for="enableAutoBackup">Otomatik Yedeklemeyi Etkinleştir</label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="backupFrequency" class="form-label">Yedekleme Sıklığı</label>
                                        <select class="form-select" id="backupFrequency" name="backup_frequency">
                                            <option value="daily" {{ if eq .Settings.BackupFrequency "daily" }}selected{{ end }}>Günlük</option>
                                            <option value="weekly" {{ if eq .Settings.BackupFrequency "weekly" }}selected{{ end }}>Haftalık</option>
                                            <option value="monthly" {{ if eq .Settings.BackupFrequency "monthly" }}selected{{ end }}>Aylık</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3" id="weeklyBackupOptions" {{ if ne .Settings.BackupFrequency "weekly" }}style="display: none;"{{ end }}>
                                        <label for="backupDay" class="form-label">Yedekleme Günü</label>
                                        <select class="form-select" id="backupDay" name="backup_day">
                                            <option value="1" {{ if eq .Settings.BackupDay "1" }}selected{{ end }}>Pazartesi</option>
                                            <option value="2" {{ if eq .Settings.BackupDay "2" }}selected{{ end }}>Salı</option>
                                            <option value="3" {{ if eq .Settings.BackupDay "3" }}selected{{ end }}>Çarşamba</option>
                                            <option value="4" {{ if eq .Settings.BackupDay "4" }}selected{{ end }}>Perşembe</option>
                                            <option value="5" {{ if eq .Settings.BackupDay "5" }}selected{{ end }}>Cuma</option>
                                            <option value="6" {{ if eq .Settings.BackupDay "6" }}selected{{ end }}>Cumartesi</option>
                                            <option value="0" {{ if eq .Settings.BackupDay "0" }}selected{{ end }}>Pazar</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3" id="monthlyBackupOptions" {{ if ne .Settings.BackupFrequency "monthly" }}style="display: none;"{{ end }}>
                                        <label for="backupDate" class="form-label">Yedekleme Günü (Ayın)</label>
                                        <select class="form-select" id="backupDate" name="backup_date">
                                            {{ range $i := loop 1 29 }}
                                            <option value="{{ $i }}" {{ if eq $.Settings.BackupDate (print $i) }}selected{{ end }}>{{ $i }}</option>
                                            {{ end }}
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="backupTime" class="form-label">Yedekleme Saati</label>
                                        <input type="time" class="form-control" id="backupTime" name="backup_time" value="{{ .Settings.BackupTime }}">
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <h6>Yedekleme İçeriği</h6>
                                    
                                    <div class="mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="backupDatabase" name="backup_database" {{ if .Settings.BackupDatabase }}checked{{ end }}>
                                            <label class="form-check-label" for="backupDatabase">Veritabanı</label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="backupFiles" name="backup_files" {{ if .Settings.BackupFiles }}checked{{ end }}>
                                            <label class="form-check-label" for="backupFiles">Dosyalar (Medya, Yüklenenler)</label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="backupSettings" name="backup_settings" {{ if .Settings.BackupSettings }}checked{{ end }}>
                                            <label class="form-check-label" for="backupSettings">Ayarlar</label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <h6>Yedekleme Konumu</h6>
                                    
                                    <div class="mb-3">
                                        <label for="backupStorage" class="form-label">Depolama Tipi</label>
                                        <select class="form-select" id="backupStorage" name="backup_storage">
                                            <option value="local" {{ if eq .Settings.BackupStorage "local" }}selected{{ end }}>Yerel Disk</option>
                                            <option value="google_drive" {{ if eq .Settings.BackupStorage "google_drive" }}selected{{ end }}>Google Drive</option>
                                            <option value="dropbox" {{ if eq .Settings.BackupStorage "dropbox" }}selected{{ end }}>Dropbox</option>
                                            <option value="s3" {{ if eq .Settings.BackupStorage "s3" }}selected{{ end }}>Amazon S3</option>
                                        </select>
                                    </div>
                                    
                                    <div id="localStorageSettings" {{ if ne .Settings.BackupStorage "local" }}style="display: none;"{{ end }}>
                                        <div class="mb-3">
                                            <label for="localBackupPath" class="form-label">Yerel Yedekleme Dizini</label>
                                            <input type="text" class="form-control" id="localBackupPath" name="local_backup_path" value="{{ .Settings.LocalBackupPath }}" placeholder="/path/to/backups">
                                        </div>
                                    </div>
                                    
                                    <div id="cloudStorageSettings" {{ if eq .Settings.BackupStorage "local" }}style="display: none;"{{ end }}>
                                        <div class="mb-3">
                                            <label for="cloudApiKey" class="form-label">API Anahtarı / Access Token</label>
                                            <input type="password" class="form-control" id="cloudApiKey" name="cloud_api_key" value="{{ .Settings.CloudAPIKey }}">
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="cloudSecret" class="form-label">API Secret</label>
                                            <input type="password" class="form-control" id="cloudSecret" name="cloud_secret" value="{{ .Settings.CloudSecret }}">
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="cloudFolder" class="form-label">Klasör Adı</label>
                                            <input type="text" class="form-control" id="cloudFolder" name="cloud_folder" value="{{ .Settings.CloudFolder }}" placeholder="site-backups">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <h6>Yedekleme Saklama</h6>
                                    
                                    <div class="mb-3">
                                        <label for="backupRetention" class="form-label">Saklanacak Yedek Sayısı</label>
                                        <input type="number" class="form-control" id="backupRetention" name="backup_retention" value="{{ .Settings.BackupRetention }}" min="1">
                                        <small class="text-muted">Belirtilen sayıdan fazla yedek olduğunda, en eski yedekler otomatik olarak silinecektir.</small>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="compressBackups" name="compress_backups" {{ if .Settings.CompressBackups }}checked{{ end }}>
                                            <label class="form-check-label" for="compressBackups">Yedekleri Sıkıştır (ZIP)</label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="encryptBackups" name="encrypt_backups" {{ if .Settings.EncryptBackups }}checked{{ end }}>
                                            <label class="form-check-label" for="encryptBackups">Yedekleri Şifrele</label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <h6>Yedekleme Bildirimleri</h6>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="backupNotifications" name="backup_notifications" {{ if .Settings.BackupNotifications }}checked{{ end }}>
                                            <label class="form-check-label" for="backupNotifications">E-posta Bildirimleri</label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="backupNotificationEmail" class="form-label">Bildirim E-posta Adresi</label>
                                        <input type="email" class="form-control" id="backupNotificationEmail" name="backup_notification_email" value="{{ .Settings.BackupNotificationEmail }}">
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    <div class="card mt-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Yedek Geçmişi</h5>
                            <button type="button" class="btn btn-sm btn-outline-secondary" id="refreshBackupHistory">
                                <i class="bi bi-arrow-clockwise"></i> Yenile
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>Tarih</th>
                                            <th>Boyut</th>
                                            <th>Tip</th>
                                            <th>Depolama</th>
                                            <th>Durum</th>
                                            <th>İşlemler</th>
                                        </tr>
                                    </thead>
                                    <tbody id="backupHistory">
                                        {{ if .Backups }}
                                            {{ range .Backups }}
                                            <tr>
                                                <td>{{ .CreatedAt }}</td>
                                                <td>{{ .Size }}</td>
                                                <td>{{ .Type }}</td>
                                                <td>{{ .Storage }}</td>
                                                <td>{{ .Status }}</td>
                                                <td>
                                                    <div class="btn-group btn-group-sm">
                                                        <button type="button" class="btn btn-outline-primary download-backup" data-id="{{ .ID }}">
                                                            <i class="bi bi-download"></i>
                                                        </button>
                                                        <button type="button" class="btn btn-outline-success restore-backup" data-id="{{ .ID }}">
                                                            <i class="bi bi-arrow-repeat"></i>
                                                        </button>
                                                        <button type="button" class="btn btn-outline-danger delete-backup" data-id="{{ .ID }}">
                                                            <i class="bi bi-trash"></i>
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                            {{ end }}
                                        {{ else }}
                                            <tr>
                                                <td colspan="6" class="text-center">Henüz bir yedekleme yapılmamış.</td>
                                            </tr>
                                        {{ end }}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Test E-posta Modalı -->
<div class="modal fade" id="testEmailModal" tabindex="-1" aria-labelledby="testEmailModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="testEmailModalLabel">Test E-postası Gönder</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Kapat"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label for="testEmailAddress" class="form-label">E-posta Adresi</label>
                    <input type="email" class="form-control" id="testEmailAddress" placeholder="ornek@example.com">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">İptal</button>
                <button type="button" class="btn btn-primary" id="sendTestEmail">Gönder</button>
            </div>
        </div>
    </div>
</div>

<!-- Yedek Geri Yükleme Modalı -->
<div class="modal fade" id="restoreBackupModal" tabindex="-1" aria-labelledby="restoreBackupModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="restoreBackupModalLabel">Yedeği Geri Yükle</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Kapat"></button>
            </div>
            <div class="modal-body">
                <div class="alert alert-warning">
                    <i class="bi bi-exclamation-triangle-fill"></i> Dikkat: Yedek geri yükleme işlemi mevcut verilerin üzerine yazacaktır. Bu işlem geri alınamaz.
                </div>
                <p>Yedeği geri yüklemek istediğinize emin misiniz?</p>
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" id="restoreDatabase" checked>
                    <label class="form-check-label" for="restoreDatabase">
                        Veritabanını Geri Yükle
                    </label>
                </div>
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" id="restoreFiles" checked>
                    <label class="form-check-label" for="restoreFiles">
                        Dosyaları Geri Yükle
                    </label>
                </div>
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" id="restoreSettings" checked>
                    <label class="form-check-label" for="restoreSettings">
                        Ayarları Geri Yükle
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">İptal</button>
                <button type="button" class="btn btn-primary" id="confirmRestore" data-id="">Geri Yükle</button>
            </div>
        </div>
    </div>
</div>

<!-- Ayarlar JS -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Tab navigasyonu
    const settingsNavLinks = document.querySelectorAll('.settings-nav a');
    settingsNavLinks.forEach(link => {
        link.addEventListener('click', function() {
            settingsNavLinks.forEach(l => l.classList.remove('active'));
            this.classList.add('active');
        });
    });
    
    // E-posta sağlayıcı değişikliği
    const emailProvider = document.getElementById('emailProvider');
    const smtpSettings = document.getElementById('smtpSettings');
    const apiSettings = document.getElementById('apiSettings');
    
    if (emailProvider) {
        emailProvider.addEventListener('change', function() {
            if (this.value === 'smtp') {
                smtpSettings.classList.remove('d-none');
                apiSettings.classList.add('d-none');
            } else {
                smtpSettings.classList.add('d-none');
                apiSettings.classList.remove('d-none');
            }
        });
    }
    
    // Genel ayarları kaydetme
    const saveGeneralSettings = document.getElementById('saveGeneralSettings');
    if (saveGeneralSettings) {
        saveGeneralSettings.addEventListener('click', function() {
            const form = document.getElementById('generalSettingsForm');
            const formData = new FormData(form);
            
            saveSettings('/admin/api/ayarlar/genel', formData);
        });
    }
    
    // Görünüm ayarlarını kaydetme
    const saveAppearanceSettings = document.getElementById('saveAppearanceSettings');
    if (saveAppearanceSettings) {
        saveAppearanceSettings.addEventListener('click', function() {
            const form = document.getElementById('appearanceSettingsForm');
            const formData = new FormData(form);
            
            saveSettings('/admin/api/ayarlar/gorunum', formData);
        });
    }
    
    // Entegrasyon ayarlarını kaydetme
    const saveIntegrationSettings = document.getElementById('saveIntegrationSettings');
    if (saveIntegrationSettings) {
        saveIntegrationSettings.addEventListener('click', function() {
            const form = document.getElementById('integrationSettingsForm');
            const formData = new FormData(form);
            
            saveSettings('/admin/api/ayarlar/entegrasyon', formData);
        });
    }
    
    // E-posta ayarlarını kaydetme
    const saveEmailSettings = document.getElementById('saveEmailSettings');
    if (saveEmailSettings) {
        saveEmailSettings.addEventListener('click', function() {
            const form = document.getElementById('emailSettingsForm');
            const formData = new FormData(form);
            
            saveSettings('/admin/api/ayarlar/eposta', formData);
        });
    }
    
    // Test e-postası modalı
    const testEmailSettings = document.getElementById('testEmailSettings');
    if (testEmailSettings) {
        testEmailSettings.addEventListener('click', function() {
            const modal = new bootstrap.Modal(document.getElementById('testEmailModal'));
            modal.show();
        });
    }
    
    // Test e-postası gönderme
    const sendTestEmail = document.getElementById('sendTestEmail');
    if (sendTestEmail) {
        sendTestEmail.addEventListener('click', function() {
            const email = document.getElementById('testEmailAddress').value;
            
            if (!email) {
                showNotification('Uyarı', 'Lütfen bir e-posta adresi girin', 'warning');
                return;
            }
            
            fetch('/admin/api/ayarlar/eposta/test', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ email: email })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showNotification('Başarılı', 'Test e-postası gönderildi', 'success');
                    bootstrap.Modal.getInstance(document.getElementById('testEmailModal')).hide();
                } else {
                    showNotification('Hata', data.message, 'error');
                }
            })
            .catch(error => {
                showNotification('Hata', 'Bir hata oluştu: ' + error.message, 'error');
            });
        });
    }
    
    // Renk değişikliklerini input'a yansıtma
    const colorInputs = document.querySelectorAll('input[type="color"]');
    colorInputs.forEach(input => {
        input.addEventListener('input', function() {
            const textInput = this.parentElement.querySelector('input[type="text"]');
            if (textInput) {
                textInput.value = this.value;
            }
        });
    });
    
    // Genel ayarları kaydetme fonksiyonu
    function saveSettings(url, formData) {
        const jsonData = {};
        for (const [key, value] of formData.entries()) {
            jsonData[key] = value;
        }
        
        fetch(url, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(jsonData)
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                showNotification('Başarılı', 'Ayarlar başarıyla kaydedildi', 'success');
            } else {
                showNotification('Hata', data.message, 'error');
            }
        })
        .catch(error => {
            showNotification('Hata', 'Bir hata oluştu: ' + error.message, 'error');
        });
    }
    
    // Sosyal medya ayarlarını kaydetme
    const saveSocialSettings = document.getElementById('saveSocialSettings');
    if (saveSocialSettings) {
        saveSocialSettings.addEventListener('click', function() {
            const form = document.getElementById('socialSettingsForm');
            const formData = new FormData(form);
            
            saveSettings('/admin/api/ayarlar/sosyal', formData);
        });
    }
    
    // SEO ayarlarını kaydetme
    const saveSeoSettings = document.getElementById('saveSeoSettings');
    if (saveSeoSettings) {
        saveSeoSettings.addEventListener('click', function() {
            const form = document.getElementById('seoSettingsForm');
            const formData = new FormData(form);
            
            saveSettings('/admin/api/ayarlar/seo', formData);
        });
    }

    // Önbellek ayarlarını kaydetme
    const saveCacheSettings = document.getElementById('saveCacheSettings');
    if (saveCacheSettings) {
        saveCacheSettings.addEventListener('click', function() {
            const form = document.getElementById('cacheSettingsForm');
            const formData = new FormData(form);
            
            saveSettings('/admin/api/ayarlar/cache', formData);
        });
    }

    // Resim kalitesi değerini gösterme
    const imageQuality = document.getElementById('imageQuality');
    const imageQualityValue = document.getElementById('imageQualityValue');
    if (imageQuality && imageQualityValue) {
        imageQuality.addEventListener('input', function() {
            imageQualityValue.textContent = this.value + '%';
        });
    }

    // Önbellek temizleme işlemleri
    function clearCache(endpoint, successMessage) {
        fetch(endpoint, {
            method: 'POST'
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                showNotification('Başarılı', successMessage, 'success');
            } else {
                showNotification('Hata', data.message, 'error');
            }
        })
        .catch(error => {
            showNotification('Hata', 'Bir hata oluştu: ' + error.message, 'error');
        });
    }

    const clearAllCache = document.getElementById('clearAllCache');
    if (clearAllCache) {
        clearAllCache.addEventListener('click', function() {
            clearCache('/admin/api/ayarlar/cache/clear-all', 'Tüm önbellek başarıyla temizlendi');
        });
    }

    const clearPageCache = document.getElementById('clearPageCache');
    if (clearPageCache) {
        clearPageCache.addEventListener('click', function() {
            clearCache('/admin/api/ayarlar/cache/clear-page', 'Sayfa önbelleği başarıyla temizlendi');
        });
    }

    const clearQueryCache = document.getElementById('clearQueryCache');
    if (clearQueryCache) {
        clearQueryCache.addEventListener('click', function() {
            clearCache('/admin/api/ayarlar/cache/clear-query', 'Sorgu önbelleği başarıyla temizlendi');
        });
    }

    const clearImageCache = document.getElementById('clearImageCache');
    if (clearImageCache) {
        clearImageCache.addEventListener('click', function() {
            clearCache('/admin/api/ayarlar/cache/clear-image', 'Resim önbelleği başarıyla temizlendi');
        });
    }

    const clearMinifiedCache = document.getElementById('clearMinifiedCache');
    if (clearMinifiedCache) {
        clearMinifiedCache.addEventListener('click', function() {
            clearCache('/admin/api/ayarlar/cache/clear-minified', 'Sıkıştırılmış dosya önbelleği başarıyla temizlendi');
        });
    }

    // Yedekleme ayarlarını kaydetme
    const saveBackupSettings = document.getElementById('saveBackupSettings');
    if (saveBackupSettings) {
        saveBackupSettings.addEventListener('click', function() {
            const form = document.getElementById('backupSettingsForm');
            const formData = new FormData(form);
            
            saveSettings('/admin/api/ayarlar/yedekleme', formData);
        });
    }

    // Yedekleme sıklığı değişikliği
    const backupFrequency = document.getElementById('backupFrequency');
    const weeklyBackupOptions = document.getElementById('weeklyBackupOptions');
    const monthlyBackupOptions = document.getElementById('monthlyBackupOptions');

    if (backupFrequency) {
        backupFrequency.addEventListener('change', function() {
            if (this.value === 'weekly') {
                weeklyBackupOptions.style.display = 'block';
                monthlyBackupOptions.style.display = 'none';
            } else if (this.value === 'monthly') {
                weeklyBackupOptions.style.display = 'none';
                monthlyBackupOptions.style.display = 'block';
            } else {
                weeklyBackupOptions.style.display = 'none';
                monthlyBackupOptions.style.display = 'none';
            }
        });
    }

    // Yedekleme depolama tipi değişikliği
    const backupStorage = document.getElementById('backupStorage');
    const localStorageSettings = document.getElementById('localStorageSettings');
    const cloudStorageSettings = document.getElementById('cloudStorageSettings');

    if (backupStorage) {
        backupStorage.addEventListener('change', function() {
            if (this.value === 'local') {
                localStorageSettings.style.display = 'block';
                cloudStorageSettings.style.display = 'none';
            } else {
                localStorageSettings.style.display = 'none';
                cloudStorageSettings.style.display = 'block';
            }
        });
    }

    // Manuel yedekleme
    const createBackupNow = document.getElementById('createBackupNow');
    if (createBackupNow) {
        createBackupNow.addEventListener('click', function() {
            this.disabled = true;
            this.innerHTML = '<i class="bi bi-hourglass-split"></i> Yedekleniyor...';
            
            fetch('/admin/api/ayarlar/yedekleme/create', {
                method: 'POST'
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showNotification('Başarılı', 'Yedekleme başlatıldı. Bu işlem biraz zaman alabilir.', 'success');
                    setTimeout(function() {
                        refreshBackupHistory();
                    }, 5000);
                } else {
                    showNotification('Hata', data.message, 'error');
                }
            })
            .catch(error => {
                showNotification('Hata', 'Bir hata oluştu: ' + error.message, 'error');
            })
            .finally(() => {
                createBackupNow.disabled = false;
                createBackupNow.innerHTML = '<i class="bi bi-download"></i> Şimdi Yedekle';
            });
        });
    }

    // Yedek geçmişini yenileme
    function refreshBackupHistory() {
        fetch('/admin/api/ayarlar/yedekleme/history')
        .then(response => response.json())
        .then(data => {
            const backupHistory = document.getElementById('backupHistory');
            
            if (data.success && data.backups && data.backups.length > 0) {
                let html = '';
                
                data.backups.forEach(backup => {
                    html += `
                    <tr>
                        <td>${backup.CreatedAt}</td>
                        <td>${backup.Size}</td>
                        <td>${backup.Type}</td>
                        <td>${backup.Storage}</td>
                        <td>${backup.Status}</td>
                        <td>
                            <div class="btn-group btn-group-sm">
                                <button type="button" class="btn btn-outline-primary download-backup" data-id="${backup.ID}">
                                    <i class="bi bi-download"></i>
                                </button>
                                <button type="button" class="btn btn-outline-success restore-backup" data-id="${backup.ID}">
                                    <i class="bi bi-arrow-repeat"></i>
                                </button>
                                <button type="button" class="btn btn-outline-danger delete-backup" data-id="${backup.ID}">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                    `;
                });
                
                backupHistory.innerHTML = html;
                addBackupEventListeners();
            } else {
                backupHistory.innerHTML = `
                <tr>
                    <td colspan="6" class="text-center">Henüz bir yedekleme yapılmamış.</td>
                </tr>
                `;
            }
        })
        .catch(error => {
            showNotification('Hata', 'Yedek geçmişi alınamadı: ' + error.message, 'error');
        });
    }

    const refreshBackupHistory = document.getElementById('refreshBackupHistory');
    if (refreshBackupHistory) {
        refreshBackupHistory.addEventListener('click', function() {
            refreshBackupHistory();
        });
    }

    // Yedek işlemleri için event listener'lar
    function addBackupEventListeners() {
        // Yedek indirme
        document.querySelectorAll('.download-backup').forEach(button => {
            button.addEventListener('click', function() {
                const backupId = this.getAttribute('data-id');
                window.location.href = `/admin/api/ayarlar/yedekleme/download/${backupId}`;
            });
        });
        
        // Yedek geri yükleme
        document.querySelectorAll('.restore-backup').forEach(button => {
            button.addEventListener('click', function() {
                const backupId = this.getAttribute('data-id');
                const modal = new bootstrap.Modal(document.getElementById('restoreBackupModal'));
                document.getElementById('confirmRestore').setAttribute('data-id', backupId);
                modal.show();
            });
        });
        
        // Yedek silme
        document.querySelectorAll('.delete-backup').forEach(button => {
            button.addEventListener('click', function() {
                if (confirm('Bu yedeği silmek istediğinize emin misiniz? Bu işlem geri alınamaz.')) {
                    const backupId = this.getAttribute('data-id');
                    
                    fetch(`/admin/api/ayarlar/yedekleme/delete/${backupId}`, {
                        method: 'DELETE'
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            showNotification('Başarılı', 'Yedek başarıyla silindi', 'success');
                            refreshBackupHistory();
                        } else {
                            showNotification('Hata', data.message, 'error');
                        }
                    })
                    .catch(error => {
                        showNotification('Hata', 'Bir hata oluştu: ' + error.message, 'error');
                    });
                }
            });
        });
    }

    // Yedek geri yükleme işlemi
    const confirmRestore = document.getElementById('confirmRestore');
    if (confirmRestore) {
        confirmRestore.addEventListener('click', function() {
            const backupId = this.getAttribute('data-id');
            const restoreDatabase = document.getElementById('restoreDatabase').checked;
            const restoreFiles = document.getElementById('restoreFiles').checked;
            const restoreSettings = document.getElementById('restoreSettings').checked;
            
            if (!restoreDatabase && !restoreFiles && !restoreSettings) {
                showNotification('Uyarı', 'En az bir öğe seçmelisiniz', 'warning');
                return;
            }
            
            fetch(`/admin/api/ayarlar/yedekleme/restore/${backupId}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    restore_database: restoreDatabase,
                    restore_files: restoreFiles,
                    restore_settings: restoreSettings
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showNotification('Başarılı', 'Geri yükleme işlemi başlatıldı. Bu işlem biraz zaman alabilir.', 'success');
                    bootstrap.Modal.getInstance(document.getElementById('restoreBackupModal')).hide();
                } else {
                    showNotification('Hata', data.message, 'error');
                }
            })
            .catch(error => {
                showNotification('Hata', 'Bir hata oluştu: ' + error.message, 'error');
            });
        });
    }

    // Sayfa yüklendiğinde yedek işlemleri için event listener'ları ekle
    addBackupEventListeners();
});
</script>
{{ end }} 