<div class="row">
    <!-- Ana İçerik -->
    <div class="col-lg-8">
        <!-- Sayfa Başlığı -->
        <h1 class="page-title mb-4">{{ .Category.Name }} HABERLERİ</h1>
        <p class="mb-4">{{ .Category.Description }}</p>

        <!-- Haberler Listesi -->
        <section class="articles-list">
            {{ if .Articles }}
                {{ range .Articles }}
                <div class="card mb-4">
                    <div class="row g-0">
                        <div class="col-md-4">
                            <img src="{{ .FeaturedImage }}" class="img-fluid rounded-start" alt="{{ .Title }}">
                        </div>
                        <div class="col-md-8">
                            <div class="card-body">
                                <div class="small text-muted">{{ formatDate .PublishedAt }}</div>
                                <h5 class="card-title">
                                    <a href="/haber/{{ .Slug }}">{{ .Title }}</a>
                                </h5>
                                <p class="card-text">{{ .Summary }}</p>
                                <div class="card-text mt-2">
                                    <span class="small text-muted">
                                        <i class="bi bi-eye"></i> {{ .ViewCount }} görüntülenme
                                    </span>
                                    <a href="/haber/{{ .Slug }}" class="btn btn-sm btn-outline-danger float-end">Haberi Oku</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {{ end }}
            {{ else }}
                <div class="alert alert-info">
                    Bu kategoride henüz haber bulunmamaktadır.
                </div>
            {{ end }}
        </section>

        <!-- Sayfalama -->
        {{ if .Articles }}
        <nav class="mt-4">
            <ul class="pagination justify-content-center">
                {{ if .Pagination.HasPrev }}
                <li class="page-item">
                    <a class="page-link" href="/kategori/{{ .Category.Slug }}?sayfa={{ .Pagination.PrevPage }}" aria-label="Önceki">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
                {{ else }}
                <li class="page-item disabled">
                    <a class="page-link" href="#" aria-label="Önceki">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
                {{ end }}

                {{ $currentPage := .Pagination.CurrentPage }}
                {{ $totalPages := .Pagination.TotalPages }}

                {{ if gt $totalPages 1 }}
                    {{ range $i := recursiveSeq 1 $totalPages }}
                        {{ if eq $i $currentPage }}
                        <li class="page-item active"><a class="page-link" href="#">{{ $i }}</a></li>
                        {{ else }}
                        <li class="page-item"><a class="page-link" href="/kategori/{{ $.Category.Slug }}?sayfa={{ $i }}">{{ $i }}</a></li>
                        {{ end }}
                    {{ end }}
                {{ end }}

                {{ if .Pagination.HasNext }}
                <li class="page-item">
                    <a class="page-link" href="/kategori/{{ .Category.Slug }}?sayfa={{ .Pagination.NextPage }}" aria-label="Sonraki">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
                {{ else }}
                <li class="page-item disabled">
                    <a class="page-link" href="#" aria-label="Sonraki">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
                {{ end }}
            </ul>
        </nav>
        {{ end }}
    </div>

    <!-- Sağ Kolon -->
    <div class="col-lg-4">
        <!-- Reklam Alanı: Sidebar Üst -->
        {{ if .AdSpaces.SidebarTop }}
        <div class="ad-container mb-4">
            {{ .AdSpaces.SidebarTop.Content | raw }}
        </div>
        {{ end }}

        <!-- Döviz Kurları Widget -->
        <div class="widget currency-widget mb-4">
            <h5 class="widget-title">DÖVİZ KURLARI</h5>
            <div class="widget-body">
                <div class="currency-item">
                    <span class="currency-name">Dolar</span>
                    <span class="currency-value">36.75 <span class="currency-change currency-up">+0.25%</span></span>
                </div>
                <div class="currency-item">
                    <span class="currency-name">Euro</span>
                    <span class="currency-value">39.55 <span class="currency-change currency-up">+0.18%</span></span>
                </div>
                <div class="currency-item">
                    <span class="currency-name">Sterlin</span>
                    <span class="currency-value">46.80 <span class="currency-change currency-up">+0.30%</span></span>
                </div>
                <div class="currency-item">
                    <span class="currency-name">Gram Altın</span>
                    <span class="currency-value">3.575 <span class="currency-change currency-down">-0.12%</span></span>
                </div>
                <div class="currency-item">
                    <span class="currency-name">Bitcoin</span>
                    <span class="currency-value">2.994.105 <span class="currency-change currency-down">-1.25%</span></span>
                </div>
            </div>
        </div>

        <!-- Hava Durumu Widget -->
        <div class="widget weather-widget mb-4">
            <h5 class="widget-title">HAVA DURUMU</h5>
            <div class="widget-body">
                <div class="weather-icon">
                    <i class="bi bi-cloud-sun"></i>
                </div>
                <div class="weather-temp">18°C</div>
                <div class="weather-desc">İstanbul, Parçalı Bulutlu</div>
                <div class="weather-details">
                    <div class="weather-detail-item">
                        <div class="weather-detail-label">NEM</div>
                        <div class="weather-detail-value">75%</div>
                    </div>
                    <div class="weather-detail-item">
                        <div class="weather-detail-label">RÜZGAR</div>
                        <div class="weather-detail-value">14 km/s</div>
                    </div>
                    <div class="weather-detail-item">
                        <div class="weather-detail-label">HİSSEDİLEN</div>
                        <div class="weather-detail-value">16°C</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Popüler Haberler -->
        <div class="widget mb-4">
            <h5 class="widget-title">POPÜLER HABERLER</h5>
            <div class="widget-body p-0">
                <ul class="list-group list-group-flush">
                    {{ range .PopularArticles }}
                    <li class="list-group-item">
                        <div class="row g-0">
                            <div class="col-3">
                                <img src="{{ .FeaturedImage }}" class="img-fluid rounded" alt="{{ .Title }}">
                            </div>
                            <div class="col-9">
                                <a href="/haber/{{ .Slug }}" class="text-decoration-none text-dark small">{{ .Title }}</a>
                                <div class="small text-muted mt-1">{{ formatDate .PublishedAt }}</div>
                            </div>
                        </div>
                    </li>
                    {{ end }}
                </ul>
            </div>
        </div>

        <!-- Kategori Listesi -->
        <div class="widget mb-4">
            <h5 class="widget-title">KATEGORİLER</h5>
            <div class="widget-body p-0">
                <ul class="list-group list-group-flush">
                    {{ range .Categories }}
                    <li class="list-group-item d-flex justify-content-between align-items-center {{ if eq .ID $.Category.ID }}active{{ end }}">
                        <a href="/kategori/{{ .Slug }}" class="text-decoration-none {{ if eq .ID $.Category.ID }}text-white{{ else }}text-dark{{ end }}">{{ .Name }}</a>
                        <span class="badge {{ if eq .ID $.Category.ID }}bg-light text-dark{{ else }}bg-secondary text-white{{ end }} rounded-pill">14</span>
                    </li>
                    {{ end }}
                </ul>
            </div>
        </div>
    </div>
</div> 